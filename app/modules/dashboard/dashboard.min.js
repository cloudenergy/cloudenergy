angular.module("app").component("dashboard",{templateUrl:"app/modules/dashboard/dashboard.html?rev=2b1519edda",controller:["$rootScope","$scope","$state","$interval","$api",function(i,e,o,u,t){var s=this,a=function(){t.weather.recent({projectid:APP.Project[0]._id},function(e){e=e.result;i.weather=s.weather=e.weather,i.humidity=s.humidity=e.humidity,i.temperature=s.temperature=e.temperature,i.wind_direction=s.wind_direction=e.wind_direction,i.wind_power=s.wind_power=e.wind_power,i.aqi=s.aqi=e.aqi,i.pm25=s.pm25=e.pm25})},l=u(function(){a()},36e5);"/system"==o.current.url?(i.shownav=s.shownav=!1,s.dashboard=!0):"/chosen"==o.current.url?i.shownav=s.shownav=!1:"/main"==o.current.url?(i.shownav=s.shownav=!1,s.dashboard=!0):(i.shownav=s.shownav=!0,s.dashboard=!1),a(),s.menuData=i.menuData,s.more=[{key:"ALL",title:" 全部"},{key:"HOTWATERMETER",title:"电"},{key:"TEMPERATURECONTROL",title:"水"},{key:"TTYPETEMPCONTROL",title:"冷热量"},{key:"DDWATERMETER",title:"费用"}],s.analyseTime=[{title:"今日",key:"today"},{title:"本月",key:"month"},{title:"本年",key:"year"}],s.dblclick=function(){i.shownav=s.shownav=!s.shownav,function(){var e=document.documentElement,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(void 0!==t&&t)t.call(e);else if(void 0!==window.ActiveXObject){var a=new ActiveXObject("WScript.Shell");null!=a&&a.SendKeys("{F11}")}}()},s.energytype=s.more[0].title,s.chooseenergytype=function(e){s.energytype=e.title},s.menuData.active=o.current.name,s.analyse="/analyse"==o.current.url||"/else{datatype}"==o.current.url,s.map="/buildingmap"==o.current.url,s.statistic="/statistic/:tab"==o.current.url,APP.title=document.title,document.title=APP.title="能耗分析系统-"+APP.Project[0].title,i.type=s.type="usage",s.fulltype=function(){"usage"==s.type?i.type=s.type="cost":i.type=s.type="usage"},e.$on("$stateChangeSuccess",function(e,t,a,n,r){s.menuData.active=t.name,s.map="/buildingmap"==o.current.url,"/system"==o.current.url?(i.shownav=s.shownav=!1,s.dashboard=!0):"/chosen"==o.current.url?(i.shownav=s.shownav=!1,s.dashboard=!0):"/main"==o.current.url?(i.shownav=s.shownav=!1,s.dashboard=!0):(i.shownav=s.shownav=!0,s.dashboard=!1),s.analyse="/analyse"==o.current.url||"/else{datatype}"==o.current.url,s.statistic="/statistic/:tab"==o.current.url,!s.dashboard&&(l&&u.cancel(l)||l())})}]});