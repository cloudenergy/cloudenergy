<style>.sensorItem {
        margin-top: 14px;
    }

    .table>tbody>tr>td {
        vertical-align: middle;
    }

    .table>tbody>tr>td td,
    .table>thead>tr .table th {
        border-top: none;
        vertical-align: middle;
    }

    .table thead th.nopadding,
    .table tbody td.nopadding {
        padding: 0px;
    }

    .table thead th.nopadding .table,
    .table tbody td.nopadding .table {
        margin-bottom: 0px;
    }</style><div class="app-view-project-monitor pl15" style="height: 100%;"><div class="monitor-main" style="height: 100%;"><div class="panel panel-default mb0 layout-column single-edit" style="background: #F5F5F5;"><div class="panel-body flex-initial p0"><form class="form-inline pb10"><div class="monitor-nav"><ul class="pull-left mt10"><li class="cursor-pointer" ng-class="{activeli:deviceSelected==device.id}" ng-repeat="device in deviceType" ng-click="selectDevice(device)">{{device.name}}</li></ul></div><label style="padding: 0 5px;margin-top: 10px;border: 1px solid #E2E2E2;height: 34px;line-height: 32px;vertical-align: middle;margin-right: -1px;background: #fff;">é€šè®¯çŠ¶æ€</label><div class="form-group mr2 mt5"><ui-select class="select" style="width:110px;" ng-model="exception.selected" remove-selected="false" on-select="OnSearch()"><ui-select-match placeholder="-é€‰æ‹©é€šè®¯çŠ¶æ€-">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="item.status as item in exception | filter: $select.search"><div ng-bind-html="item.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="form-group ml2 mr2 w200 mt7"><input class="form-control" type="text" placeholder="å…³é”®å­—ï¼šID/åç§°" ng-model="searchKey"></div><div class="form-group pl10 mr10" style="background: #FBFBFB;height: 34px;width: 35px;padding-top: 6px;margin-left: -3px;margin-top: 7px;border: 1px solid #D4D2D2;border-left: 1px solid #EEEDEE;"><a ng-click="OnSearch()">ğŸ”</a></div><div class="form-group pl10 mr10 mt7"><span class="inline fs34" style="vertical-align:top;">ä»ªè¡¨æ€»æ•°{{itemsTotal || 0}}æ¡</span></div><div class="pull-right pt8"><div class="form-group"><button class="btn btn-sm ml5" href="javascript:void(0)" ng-click="importSensor()">å¯¼å…¥</button> <button class="btn btn-sm ml5" ng-show="$root.Rule.admin.sensor.syncdata" modal-download="downloadFile" modal-download-name="downloadName" ng-click="exportSensor()">å¯¼å‡º</button></div></div></form></div><div class="panel-body flex overflow-auto pt0 pb0"><div class="layout-row"><div class="panel-body flex overflow-auto no-padding mr10"><table class="table table-bordered table-hover mb0 sensortable" style="background: #F5F5F5;"><thead><tr><th class="text-center firstCheckbox" style="width:60px;"><checkbox checked="multiCheck.all" on-check="multiCheck('all')"></checkbox>åºå·</th><th>ID</th><th>åç§°</th><th>å€ç‡</th><th>é€šè®¯æ—¶é—´</th><th class="no-padding" style="vertical-align:middle;"><div class="row">è¯»æ•°</div></th><th>å¼€å…³</th><th style="width:100px;" class="text-center">å±æ€§</th><th>ç¼–ç </th><th>é‡‡é›†å™¨ç¼–å·</th></tr></thead><tbody><tr ng-repeat="sensor in viewOfSensor"><td class="text-center"><checkbox checked="sensor.isSelected" on-check="multiCheck()"></checkbox>{{(currentPage-1)*pageSize+$index+1}}</td><td class="col-md-1"><div popover-placement="top" uib-popover="{{sensor.id}}" popover-is-open="did" ng-mouseenter="did=true" ng-mouseleave="did=false">{{sensor.id.substr(12,12)}}</div></td><td class="row-title">{{sensor.title || '-'}} <a class="glyphicon glyphicon-pencil td-row-edit" popover-is-open="sensor.titleIsOpen" uib-popover-template="popover.url.title" popover-title="{{popover.title.title}}" popover-placement="bottom" ng-click="Change.title=sensor.title;popIsOpen()" class="btn btn-default"></a></td><td>{{sensor.comi || '-'}} <a class="glyphicon glyphicon-pencil td-row-edit" popover-is-open="sensor.comiIsOpen" uib-popover-template="popover.url.comi" popover-title="{{popover.title.comi}}" popover-placement="bottom" ng-click="Change.comi=sensor.comi;popIsOpen()" class="btn btn-default"></a></td><td class="no-padding" ng-style="{'color': channel.status.color}"><div class="row" ng-repeat="channel in sensor.channels" style="height: 21px;"><div class="col-md-11" ng-class="{'bb': !$last}" ng-if="channel.lastupdate"><nobr>{{channel.lastupdate|date:'yyyyå¹´Mæœˆddæ—¥ H:mm:ss'}}</nobr></div></div></td><td class="no-padding" ng-style="{'color': channel.status.color}"><div class="row" ng-repeat="channel in sensor.channels"><div class="col-md-7" ng-class="{'bb': !$last}"><nobr>{{channel.channel}}<div class="inline ml5" ng-class="[{0:'text-success',1:'text-danger',2:'text-warning'}[channel.status],channel.status.hintStyle]" popover-class="w250" popover-placement="top" uib-popover-template="'sensor-info-row-channel.html'" popover-is-open="over" ng-mouseenter="over=true" ng-mouseleave="over=false">{{channel.lasttotal}}</div></nobr></div><div class="col-md-4 text-center text-blue" ng-class="{'bb': !$last}"><a class="btn-link" ng-show="$root.Rule.admin.sensor.mask" ng-click="OnMask(channel)">{{channel.mask&&'å¯ç”¨'||'å±è”½'}}</a></div></div></td><td class="row-sensor"><label class="switch switch-sm mb0"><input type="checkbox" ng-model="sensor.status.switch" ng-click="switchControl(sensor)"> <span><i class="handle"></i></span></label></td><td class="text-center"><a class="btn-link" ng-click="OnSensorAttribute(sensor)">ç®¡ç†</a></td><td>{{sensor.tag || '-'}} <a class="glyphicon glyphicon-pencil td-row-edit" popover-is-open="sensor.tagIsOpen" uib-popover-template="popover.url.tag" popover-title="{{popover.title.tag}}" popover-placement="bottom" ng-click="Change.tag=sensor.tag;popIsOpen()" class="btn btn-default"></a></td><td>{{sensor.gatewayid}}</td></tr></tbody></table></div><div class="panel-body flex-initial overflow-auto pt0 pr0 pb0 w250 treeContainer" style="background: #DFE9F4"><div class="tab"><a href="#" ng-class="{treeTabActive:!tabActive}" ng-click="tabActive=false" ng-model="customer.enable" uib-btn-radio="false">æ•°æ®ç®¡ç†å™¨</a> <a href="#" ng-class="{treeTabActive:tabActive}" ng-click="tabActive=true" ng-model="customer.enable" uib-btn-radio="true">å»ºç­‘ç»“æ„</a></div><div ng-show="customer.enable&&buildings.length"><tree data="treeData" input-checked="buildings.selected"></tree></div><div ng-show="!customer.enable"><ul class="treeData"><li ng-repeat="i in customer"><span class="round" ng-class="{green:i.status==='ONLINE',red:i.status!=='ONLINE'}"></span> <span popover-placement="top" uib-popover="{{i.id}}" popover-is-open="did" ng-mouseenter="did=true" ng-mouseleave="did=false">{{i.title}}</span></li></ul></div></div></div></div><div class="panel-body flex-initial"><div class="pt15 bt" style="margin-right:250px;"><div class="pull-left"><div class="form-group"><a class="btn btn-sm sensorbutton" ng-show="$root.Rule.admin.sensor.mask" ng-click="OnMaskAll(false)">å¯ç”¨ </a><a class="btn btn-sm sensorbutton ml5" ng-show="$root.Rule.admin.sensor.mask" ng-click="OnMaskAll(true)">å±è”½ </a><a class="btn btn-sm sensorbutton ml5" ng-show="$root.Rule.admin.sensor.syncdata" ng-click="switchControlAll(false)">æ–­ç”µ </a><a class="btn btn-sm sensorbutton ml5" ng-show="$root.Rule.admin.sensor.syncdata" ng-click="switchControlAll(true)">é€ç”µ</a></div></div><div class="pull-right"><ul uib-pagination class="mt0 mb0 ml10" total-items="itemsTotal" ng-model="currentPage" items-per-page="pageSize" max-size="10" rotate="false" boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></ul></div></div></div></div></div></div><script type="text/ng-template" id="switch_control.html"><div class="container-fluid">
        <div class="text-center bb no-margin p10 h3">
            éªŒè¯æ“ä½œ
        </div>
        <div class="pt15 pb15">
            <div class="input-group">
                <div class="input-group-addon">å¯†ç </div>
                <input type="password" class="form-control" placeholder="è¯·è¾“å…¥å¯†ç " ng-model="password" required>
            </div>
        </div>
        <div class="text-right pb15">
            <button class="btn btn-sm btn-primary mr5" ng-click="OnSubmit()">éªŒè¯</button>
            <button class="btn btn-sm btn-default" ng-click="OnCancel()">å–æ¶ˆ</button>
        </div>
    </div></script><script type="text/ng-template" id="importSensor.html"><div class="container-fluid">
        <div align="center" style="padding: 30; border-bottom: 1px solid #E5E5E5; min-height: 16; ">
            <h3>å¯¼å…¥æ™ºèƒ½ä»ªè¡¨</h3>
        </div>
        <div class="row sensorItem ml20">
            <div class="btn-group">
                <a class="btn" ng-class="{'btn-primary':!wifi.show,'btn-default':wifi.show}" ng-click="wifi.show=false">
                    excelå¯¼å…¥
                </a>
                <a class="btn" ng-class="{'btn-primary':wifi.show,'btn-default':!wifi.show}" ng-click="wifi.show=true">
                    wifiè¡¨å¯¼å…¥
                </a>
            </div>
        </div>
        <div align="center">
            <form action="{{actionURL}}" method="post" ng-upload="OnUploadComplete(content)" class="m20" ng-if="!wifi.show">
                <input type="file" name="sensors" class="col-md-6" />
                <input type="submit" value="ä¸Šä¼ " class="btn btn-primary" ng-disabled="$isUploading" />
                <input type="hidden" name="projectid" value="{{project}}" />
                <input type="hidden" name="buildingid" value="{{building}}" />
                <input type="hidden" name="customerid" value="{{customer}}" />
            </form>
            <div class="text-left m20" ng-if="!wifi.show">
                <a target="_blank" href="files/ä»ªè¡¨å¯¼å…¥æ¨¡æ¿.xlsx" class="text-primary bold">é»˜è®¤æ¨¡æ¿ä¸‹è½½</a>
            </div>
            <div class="m20" ng-if="wifi.show">
                <textarea ng-model="wifi.equipments" style="width:400px;height:100px" />
            </div>
        </div>
        <div style="margin-top: 15px; padding: 0px 20px 20px; text-align: center;">
            <button class="btn btn-primary" ng-click="ok()" ng-disabled="$isUploading">ç¡®å®š</button>
            <button class="btn btn-default" ng-click="cancel()" ng-disabled="$isUploading">å–æ¶ˆ</button>
        </div>
    </div></script><script type="text/ng-template" id="sensorAttribute.html"><div class="container-fluid">
        <div align="center" style="padding: 30; border-bottom: 1px solid #E5E5E5; min-height: 16; ">
            <h3>æ™ºèƒ½ä»ªè¡¨å±æ€§</h3>
        </div>
        <div class="row sensorItem ml20">
            <div class="btn-group">
                <a class="btn" ng-class="{2:'btn-primary',1:'btn-default',3:'btn-default'}[else]" ng-click="else=2">
                    ä¿¡æ¯
                </a>
                <a class="btn" ng-class="{1:'btn-primary',2:'btn-default',3:'btn-default'}[else]" ng-click="else=1">
                    é©±åŠ¨
                </a>
                <!--<a class="btn" ng-class="{3:'btn-primary',1:'btn-default',2:'btn-default'}[else]" ng-click="else=3">
                            å…¶ä»–
                        </a>-->
            </div>
        </div>
        <div class="row" ng-if="else==2">
            <div class="row sensorItem col-sm-8 col-sm-offset-2">
                è®¾å¤‡æ ‡è¯†
                <div class="form-group" style="margin-left:-10px">
                    <div class="col-sm-4">åŒºåŸŸä»£ç +è®¾å¤‡ID
                        <input class="form-control mb15" type="text" ng-model="sensorInfo.areaid">
                    </div>
                    <div class="col-sm-4">ä»ªè¡¨ID
                        <input class="form-control mb15" type="text" ng-model="sensorInfo.addrid">
                    </div>
                    <div class="col-sm-4"> ä»ªè¡¨åºå·
                        <input class="form-control mb15" type="text" ng-model="sensorInfo.meterid">
                    </div>
                </div>
                è®¾å¤‡åç§°
                <input class="form-control mb15" type="text" ng-model="sensorInfo.title"> æ›´æ–°é¢‘ç‡
                <input class="form-control mb15" type="text" ng-model="sensorInfo.freq"> å€ç‡
                <input class="form-control mb15" type="text" ng-model="sensorInfo.comi">
            </div>
        </div>
        <div class="row" ng-if="else==1">
            <div class="row sensorItem">
                <div class="col-lg-2"></div>
                <div class="col-lg-3" align="right">æ™ºèƒ½ä»ªè¡¨é©±åŠ¨ï¼š</div>
                <div class="col-lg-4">
                    <ui-select ng-model="DriverCompany.selected" remove-selected="false">
                        <ui-select-match placeholder="--é€‰æ‹©æ™ºèƒ½ä»ªè¡¨å‚å•†--">{{$select.selected.id}}</ui-select-match>
                        <ui-select-choices repeat="item in DriverCompany | filter: $select.search">
                            <div ng-bind-html="item.id | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-2"></div>
            </div>
            <div class="row sensorItem">
                <div class="col-lg-2"></div>
                <div class="col-lg-3" align="right"></div>
                <div class="col-lg-4">
                    <!--<select class="form-control" ng-options="drivername.id as drivername.id for drivername in DriverName" ng-model="driverNameSelected"></select>-->
                    <ui-select ng-model="DriverName.selected" remove-selected="false">
                        <ui-select-match placeholder="--é€‰æ‹©æ™ºèƒ½ä»ªè¡¨é©±åŠ¨åç§°--">{{$select.selected.id}}</ui-select-match>
                        <ui-select-choices repeat="item in DriverName | filter: $select.search">
                            <div ng-bind-html="item.id | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-2"></div>
            </div>
            <div class="row sensorItem">
                <div class="col-lg-2"></div>
                <div class="col-lg-3" align="right"></div>
                <div class="col-lg-4">
                    <!--<select class="form-control" ng-options="driverversion.id as driverversion.id for driverversion in DriverVersion" ng-model="driverVersionSelected"></select>-->
                    <ui-select ng-model="DriverVersion.selected" remove-selected="false">
                        <ui-select-match placeholder="--é€‰æ‹©æ™ºèƒ½ä»ªè¡¨é©±åŠ¨ç‰ˆæœ¬--">{{$select.selected.id}}</ui-select-match>
                        <ui-select-choices repeat="item in DriverVersion | filter: $select.search">
                            <div ng-bind-html="item.id | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-2"></div>
            </div>
            <div class="row sensorItem" ng-show="devicedrive">
                <div class="col-lg-2"></div>
                <div class="col-lg-3" align="right">æ™ºèƒ½ä»ªè¡¨å‹å·ï¼š</div>
                <div class="col-lg-4">
                    <!--<select class="form-control" ng-options="adaptdevice.code as adaptdevice.desc for adaptdevice in AdaptDevice" ng-model="adaptDeviceSelected"></select>-->
                    <ui-select ng-model="AdaptDevice.selected" remove-selected="false">
                        <ui-select-match placeholder="--é€‰æ‹©æ™ºèƒ½ä»ªè¡¨å‹å·--">{{$select.selected.desc}}</ui-select-match>
                        <ui-select-choices repeat="item in AdaptDevice | filter: $select.search">
                            <div ng-bind-html="item.desc | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-2"></div>
            </div>
        </div>
        <div class="row" ng-if="else==3">
            <div class="row sensorItem">
                <div class="col-lg-4 col-lg-offset-4">ä»ªè¡¨æ€»è¡¨
                    <input type="checkbox">
                </div>
            </div>
        </div>
        <div style="margin-top: 15px; padding: 0px 20px 20px; text-align: center;">
            <button class="btn btn-primary" ng-click="Ok()">ç¡®å®š</button>
            <button class="btn btn-default" ng-click="Cancel()">å–æ¶ˆ</button>
        </div>
    </div></script><script type="text/ng-template" id="titleChange.html"><div class="modal-body text-center">
        <input type="text" class="form-control" ng-model="Change.title" auto-focus>
    </div>
    <div class="modal-footer text-center">
        <button class="btn btn-sm btn-primary mr5" ng-click="popover.ok(sensor,'title',Change)">ä¿®æ”¹</button>
        <button class="btn btn-sm btn-default" ng-click="popover.cancel(sensor,'title')">å–æ¶ˆ</button>
    </div></script><script type="text/ng-template" id="tagChange.html"><div class="modal-body text-center">
        <input type="text" class="form-control" ng-model="Change.tag" auto-focus>
    </div>
    <div class="modal-footer text-center">
        <button class="btn btn-sm btn-primary mr5" ng-click="popover.ok(sensor,'tag',Change)">ä¿®æ”¹</button>
        <button class="btn btn-sm btn-default" ng-click="popover.cancel(sensor,'tag')">å–æ¶ˆ</button>
    </div></script><script type="text/ng-template" id="comiChange.html"><div class="modal-body text-center">
        <input type="text" class="form-control" ng-model="Change.comi" auto-focus>
    </div>
    <div class="modal-footer text-center">
        <button class="btn btn-sm btn-primary mr5" ng-click="popover.ok(sensor,'comi',Change)">ä¿®æ”¹</button>
        <button class="btn btn-sm btn-default" ng-click="popover.cancel(sensor,'comi')">å–æ¶ˆ</button>
    </div></script><script type="text/ng-template" id="sensor-info-row-channel.html"><div>å®æ—¶è¯»æ•°ï¼š{{channel.realdata}}</div>
    <div>æœ€åä¸Šä¼ ï¼š{{channel.lastupdate|date:'yyyy-M-dd H:mm:ss'}}</div></script>