"use strict";angular.module("app").component("login",{templateUrl:"app/modules/login/login.html?rev=7db6f627fd",controller:["$scope","$cookies","$element","$timeout","$state","User",function(e,r,o,l,a,t){var s=this;s.user=localStorage.loginUser,s.passwd=localStorage.loginPasswd,s.remember=!!localStorage.loginRemember,s.rememberaccount=!!localStorage.rememberAccount,s.readonly=!0,l(function(){s.readonly=!1},500),s.clearUserInput=function(){delete localStorage.loginUser,delete s.user,delete localStorage.loginPasswd,delete s.passwd,delete localStorage.loginRemember,delete s.remember,delete localStorage.rememberAccount,delete s.rememberaccount},s.clearPasswdInput=function(){delete localStorage.loginPasswd,delete s.passwd,delete localStorage.loginRemember,delete s.remember},e.$watch("$ctrl.rememberaccount",function(){!s.rememberaccount&&(s.remember=s.rememberaccount)}),e.$watch("$ctrl.remember",function(){s.remember&&(s.rememberaccount=s.remember)}),s.login=function(e){var r=s.remember,o=s.rememberaccount;e.$invalid?(!s.user&&e.user.$setDirty(),!s.passwd&&e.password.$setDirty()):(delete localStorage.loginUser,delete localStorage.loginPasswd,delete localStorage.loginRemember,delete localStorage.rememberAccount,localStorage.loginUser=s.user,r&&(localStorage.loginPasswd=s.passwd,localStorage.loginRemember=r,localStorage.rememberAccount=o,localStorage.loginUser=s.user),!r&&o&&(delete localStorage.loginPasswd,delete localStorage.loginRemember,localStorage.rememberAccount=o,localStorage.loginUser=s.user),t.$login({user:s.user,passwd:(new window.Hashes.MD5).hex(s.passwd).toUpperCase(),remember:r}).then(function(){a.go("dashboard.main",{},{location:"replace"})},function(e){e.message={20000001:"用户不存在",90000001:"服务器错误",90000002:"拒绝访问",90000003:"登录失败",90000004:"权限不足",90000005:"未登录",90000006:["验证失败","账号或密码有误"],90000007:"签名校验失败"}[e.code]||e.message,e.message&&SweetAlert.error.apply(SweetAlert,angular.isArray(e.message)?e.message:[e.message])}))}}]});