"use strict";angular.module("app").component("login",{templateUrl:"app/modules/login/login.html?rev=9aa8c00ec9",controller:["$scope","$cookies","$element","$timeout","$state","User",function(e,o,r,l,a,t){var c=this;c.user=localStorage.loginUser,c.passwd=localStorage.loginPasswd,c.remember=!!localStorage.loginRemember,c.rememberaccount=!!localStorage.rememberAccount,c.readonly=!0,l(function(){c.readonly=!1},500),c.clearUserInput=function(){delete localStorage.loginUser,delete c.user,delete localStorage.loginPasswd,delete c.passwd,delete localStorage.loginRemember,delete c.remember,delete localStorage.rememberAccount,delete c.rememberaccount},c.clearPasswdInput=function(){delete localStorage.loginPasswd,delete c.passwd,delete localStorage.loginRemember,delete c.remember},e.$watch("$ctrl.rememberaccount",function(){!c.rememberaccount&&(c.remember=c.rememberaccount)}),e.$watch("$ctrl.remember",function(){c.remember&&(c.rememberaccount=c.remember)}),c.login=function(e){var o=c.remember,r=c.rememberaccount;e.$invalid?(!c.user&&e.user.$setDirty(),!c.passwd&&e.password.$setDirty()):(delete localStorage.loginUser,delete localStorage.loginPasswd,delete localStorage.loginRemember,delete localStorage.rememberAccount,localStorage.loginUser=c.user,o&&(localStorage.loginPasswd=c.passwd,localStorage.loginRemember=o,localStorage.rememberAccount=r,localStorage.loginUser=c.user),!o&&r&&(delete localStorage.loginPasswd,delete localStorage.loginRemember,localStorage.rememberAccount=r,localStorage.loginUser=c.user),t.$login({user:c.user,passwd:(new window.Hashes.MD5).hex(c.passwd).toUpperCase(),remember:o}).then(function(){a.go("dashboard.main",{},{location:"replace"})},function(e){e.message={20000001:"用户不存在",90000001:"服务器错误",90000002:"拒绝访问",90000003:"登录失败",90000004:"权限不足",90000005:"未登录",90000006:["验证失败","账号或密码有误"],90000007:"签名校验失败"}[e.code]||e.message}))}}]});